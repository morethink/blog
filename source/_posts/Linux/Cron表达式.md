---
title: Cron表达式
date: 2018-04-22
tags:
categories: Linux
---

**Cron表达式范例：**

- `*/5 * * * * ?`  ：每隔5`秒`执行一次
- `0 */1 * * * ?`  ：每隔1分钟执行一次
- `0 0 23 * * ?`   ：每天23点执行一次
- `0 0 1 * * ?`    ：每天凌晨1点执行一次：
- `0 0 1 1 * ?`  ：每月1号凌晨1点执行一次
- `0 0 23 L * ?` ： 每月最后一天23点执行一次
- `0 0 1 ? * L`  ：每周星期天凌晨1点实行一次
- `0 26,29,33 * * * ? ` ： 在26分、29分、33分执行一次
- `0 0 0,13,18,21 * * ?` ： 每天的0点、13点、18点、21点都执行一次
<!-- more -->
# Cron表达式

Cron表达式由7个部分组成，各部分用空格隔开，Cron表达式的7个部分从左到右代表的含义如下：

`秒` `分` `时` `日` `月` `周` `年`
其中 `年`是可选的。


| 字段名            |     允许的值 |                       允许的特殊字符 |  
|-------------------------------------|---------------|-------|
| `秒`                    |  0-59 | ,- * / |  |
| `分`                   |   0-59 | ,- * / |  |
| `时`                 |   0-23 | ,- * / |  |
| `日`                   |   1-31 | ,- * ? / L W C |  |
| `月`                    |  1-12 or JAN-DEC | ,- * / |  |
| `周`               |   1-7 or SUN-SAT | ,- * ? / L C # |  |
| `年` (可选字段)          |  empty，1970-2099 | ,- * / |

# 符号说明
- `,`：表示列出枚举值值。例如在`分`使用5,20，则意味着在5和20分每分钟触发一次。
- `-`：表示范围。例如在`分`使用5-20，表示从5分到20分钟每分钟触发一次。
- `*` ：表示匹配该域的任意值。假如在`分`域使用`*`，即表示每分钟都会触发事件。
- `/` ：表示起始时间开始触发，然后每隔固定时间触发一次，例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次。
- `?` ：只能用在`周`和`日`。它也匹配域的任意值，但实际不会。因为`周`和`日`会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?,其中最后一位只能用？，而不能使用*，如果使用*表示不管星期几都会触发，实际上并不是这样。    
- `L` ： 表示最后，只能出现在`日`和`周`，如果在`日`使用5L,意味着在最后的一个星期四触发。  
- `W`：表示有效工作日(周一到周五),只能出现在`周`域，系统将在离指定日期的最近的有效工作日触发事件。例如：在`日`使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份。
- `#`：用于确定每个月第几个星期几，只能出现在`周`。例如在4#2，表示某月的第二个星期三。

**参考文档**：
1. [在线Cron表达式生成器](http://Cron.qqe2.com/)
2. [QuartZ Cron表达式详解](https://www.jianshu.com/p/f03b1497122a)
